<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.insigma.ordercenter.mapper.ExpressFeeMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.insigma.ordercenter.entity.ExpressFee">
        <id column="express_fee_id" property="expressFeeId" />
        <result column="express_company_id" property="expressCompanyId" />
        <result column="province" property="province" />
        <result column="warehouse_id" property="warehouseId" />
        <result column="warehouse_name" property="warehouseName" />
        <result column="first_weight" property="firstWeight" />
        <result column="first_price" property="firstPrice" />
        <result column="additional_price" property="additionalPrice" />
        <result column="product_type" property="productType" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        express_fee_id, express_company_id, province, warehouse_id, warehouse_name, first_weight, first_price, additional_price, product_type
    </sql>


    <select id="page" resultType="com.insigma.ordercenter.entity.vo.ExpressFeePageVO">
        select
<include refid="Base_Column_List" />,vpc.data_value productTypeName
         from t_express_fee tef left join v_product_category vpc on tef.product_type= vpc.dictionary_id
         where 1=1
                <if test="request.expressFeeId != null and request.expressFeeId  >0">
                and   tef.express_fee_id=#{request.expressFeeId}
                </if>
                <if test="request.expressCompanyId != null and request.expressCompanyId >0">
                and   tef.express_company_id=#{request.expressCompanyId}
                </if>
                <if test="request.province != null and request.province != ''">
                    and   tef.province=#{request.province}
                </if>
                <if test="request.warehouseId!= null and  request.warehouseId  >0">
                and   tef.warehouse_id=#{request.warehouseId}
                </if>
                <if test="request.warehouseName != null and request.warehouseName != ''">
                    and   tef.warehouse_name like '%'+ #{request.warehouseName}+ '%'
                </if>
                <if test="request.firstWeight!= null and  request.firstWeight  >0">
                and   tef.first_weight=#{request.firstWeight}
                </if>
                <if test="request.firstPrice!= null and  request.firstPrice >0">
                and   tef.first_price=#{request.firstPrice}
                </if>
                <if test="request.additionalPrice!= null and request.additionalPrice >0">
                and   tef.additional_price=#{request.additionalPrice}
                </if>
                <if test="request.productType!= null and  request.productType  >0">
                and   tef.product_type=#{request.productType}
                </if>
    </select>
</mapper>
