<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.insigma.ordercenter.mapper.ProductMapper">

    <select id="getProductListPage" resultType="com.insigma.ordercenter.entity.vo.ProductListPageVO">
        SELECT
            product_id,
            product_sku,
            product_name,
            product_price,
            discount_price,
            product_specs,
            put_on_time,
            sub_title,
            brand,
            product_no,
            is_put_on,
            is_combo,
            product_nc
        FROM
            t_product
        WHERE
            is_deleted = 0
        <if test="productName != null and productName != ''">
            AND product_name like #{productName}
        </if>
        <if test="productSku != null and productSku != ''">
            AND product_sku like #{productSku}
        </if>
        <if test="productSku != null and productSku != ''">
            AND product_no like #{productNo}
        </if>
    </select>


    <select id="getProductDetail" resultType="com.insigma.ordercenter.entity.vo.ProductDetailVO">
        SELECT
            a.product_id,
            a.product_sku,
            a.product_name,
            a.product_price,
            a.discount_price,
            a.product_specs,
            a.unit,
            a.product_type,
            a.sub_title,
            a.description,
            a.is_put_on,
            a.is_combo,
            c.data_value AS brand,
            a.ship_weight,
            a.product_no,
            a.product_nc,
            a.order_source_id,
            b.source_name AS orderSourceName,
            a.is_discount,
            a.unit_quantity,
            a.weight,
            a.qr_code,
            a.length_width_height,
			a.product_picture_url,
			a.is_reserve,
			a.cycle,
			a.reserve_time,
			a.send_count,
			a.send_number
        FROM
            t_product a
        LEFT JOIN t_order_source b ON a.order_source_id=b.order_source_id
        LEFT JOIN sys_dictionary c ON a.brand=c.data_code
        WHERE a.product_id=#{productId}
    </select>

    <select id="getShippingOrderProductList" resultType="com.insigma.ordercenter.entity.vo.ShippingProductVO">
        SELECT
            a.order_id,
            a.order_detail_id,
            a.product_id,
            a.product_sku,
            a.product_name,
            a.product_specs,
            a.amount,
            a.unit,
            a.product_price
        FROM
            t_order_detail a
        WHERE a.order_id=#{orderId}
    </select>
</mapper>
